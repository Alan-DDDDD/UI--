# IF-ELSE分支使用說明

## 功能概述

現在FlowBuilder支援真正的IF-ELSE條件分支，讓您可以根據條件結果執行不同的流程路徑。

## 使用步驟

### 1. 添加條件節點

從節點庫中選擇：
- **條件判斷** (`condition`) - 簡單的單條件判斷
- **IF條件** (`if-condition`) - 支援多條件的複雜判斷

### 2. 配置條件

點擊條件節點進行編輯：

#### 簡單條件判斷
- **判斷欄位**: 例如 `{message}`, `{userId}`
- **判斷條件**: 等於、包含、大於等
- **比較值**: 要比較的值

#### IF條件（推薦）
- **邏輯關係**: AND（所有條件都成立）或 OR（任一條件成立）
- **多個條件**: 可添加多個判斷條件
- 每個條件包含：欄位、運算子、比較值

### 3. 連接分支

從條件節點拖出兩條線：
1. **第一條線** - 自動設為 TRUE 分支（綠色）
2. **第二條線** - 自動設為 FALSE 分支（紅色）

### 4. 設定分支類型

右鍵點擊連接線，可以：
- 切換分支類型（TRUE ↔ FALSE）
- 暫停/啟用路徑
- 刪除路徑

## 執行邏輯

```
開始 → 條件判斷 → 
                ├─ TRUE分支 → 執行對應節點
                └─ FALSE分支 → 執行對應節點
```

## 實際範例

### 範例1：LINE Bot自動回覆

```
Webhook觸發 → IF條件({message} 包含 "你好") →
                                    ├─ TRUE → LINE回覆("你好！很高興見到你")
                                    └─ FALSE → LINE回覆("感謝您的訊息")
```

### 範例2：用戶權限檢查

```
API呼叫(取得用戶資料) → IF條件({role} 等於 "admin") →
                                              ├─ TRUE → 執行管理員功能
                                              └─ FALSE → 顯示權限不足
```

### 範例3：多條件判斷

```
資料輸入 → IF條件(AND邏輯) →
          ├─ 條件1: {age} >= 18
          ├─ 條件2: {status} 等於 "active"
          └─ 結果: ├─ TRUE → 允許操作
                  └─ FALSE → 拒絕操作
```

## 視覺化標示

- **TRUE分支**: 綠色連接線，標示 "TRUE"
- **FALSE分支**: 紅色連接線，標示 "FALSE"
- **條件節點**: 藍色漸層背景，易於識別

## 測試建議

1. **單元測試**: 分別測試TRUE和FALSE分支
2. **邊界測試**: 測試條件的臨界值
3. **組合測試**: 測試多條件的各種組合

## 常見問題

### Q: 可以有多個TRUE或FALSE分支嗎？
A: 可以。一個條件節點可以連接多條相同類型的分支。

### Q: 如何修改分支類型？
A: 右鍵點擊連接線，選擇切換分支類型。

### Q: 條件不成立時會發生什麼？
A: 系統會執行FALSE分支的所有連接節點。

### Q: 支援巢狀條件嗎？
A: 支援。可以在TRUE或FALSE分支後再添加條件節點。

## 最佳實踐

1. **清晰命名**: 為條件節點設定有意義的名稱
2. **邏輯簡化**: 複雜邏輯可拆分為多個簡單條件
3. **錯誤處理**: 為每個分支都設計適當的錯誤處理
4. **測試覆蓋**: 確保所有分支都經過測試

## 進階技巧

### 條件鏈
```
條件A → TRUE → 條件B → TRUE → 最終動作1
     └─ FALSE ────────→ 條件C → TRUE → 最終動作2
                            └─ FALSE → 預設動作
```

### 條件合併
使用IF條件節點的AND/OR邏輯，避免過多的巢狀結構。

---

🎉 現在您可以創建更複雜、更智能的工作流程了！